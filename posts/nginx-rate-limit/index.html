<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nginx Rate Limit | DevSecOps</title><meta name=keywords content="nginx"><meta name=description content="Nginx Rate Limit
Introduction
Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.
I seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn&rsquo;t find an example anywhere."><meta name=author content="Loz"><link rel=canonical href=https://blog.laurencejones.dev/posts/nginx-rate-limit/><link crossorigin=anonymous href=/assets/css/stylesheet.12d77b1a48bf3a84befd811f8e53c40f673157211c1463b420f1d34bd663cb7a.css integrity="sha256-Etd7Gki/OoS+/YEfjlPED2cxVyEcFGO0IPHTS9Zjy3o=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.laurencejones.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.laurencejones.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.laurencejones.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.laurencejones.dev/apple-touch-icon.png><link rel=mask-icon href=https://blog.laurencejones.dev/safari-pinned-tab.svg><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#603cba"><link rel=alternate hreflang=en href=https://blog.laurencejones.dev/posts/nginx-rate-limit/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.laurencejones.dev/posts/nginx-rate-limit/"><meta property="og:site_name" content="DevSecOps"><meta property="og:title" content="Nginx Rate Limit"><meta property="og:description" content="Nginx Rate Limit Introduction Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.
I seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn’t find an example anywhere."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-01T20:40:50+00:00"><meta property="article:modified_time" content="2024-03-01T20:40:50+00:00"><meta property="article:tag" content="Nginx"><meta property="og:image" content="https://blog.laurencejones.dev/rate-limit.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.laurencejones.dev/rate-limit.jpg"><meta name=twitter:title content="Nginx Rate Limit"><meta name=twitter:description content="Nginx Rate Limit
Introduction
Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.
I seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn&rsquo;t find an example anywhere."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.laurencejones.dev/posts/"},{"@type":"ListItem","position":2,"name":"Nginx Rate Limit","item":"https://blog.laurencejones.dev/posts/nginx-rate-limit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nginx Rate Limit","name":"Nginx Rate Limit","description":"Nginx Rate Limit Introduction Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.\nI seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn\u0026rsquo;t find an example anywhere.\n","keywords":["nginx"],"articleBody":"Nginx Rate Limit Introduction Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.\nI seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn’t find an example anywhere.\nI wanted to limit the number of requests to all my subdomains, but I also wanted to allow a single subdomain to bypass the rate limit.\nThis is useful when you host certain services that may require more requests than others, such as a web applications that hosts static files.\nBasic Rate Limiting Example To set up rate limiting in Nginx, you will need to add a new limit_req_zone directive to your http block. This directive will define a new rate limiting zone that will be used to track the number of requests to your server.\nPersonally I created a new file in /etc/nginx/conf.d/ called base-rate-limit.conf and added the following:\nlimit_req_zone $binary_remote_addr zone=rate_limit:10m rate=10r/s; This will create a new rate limiting zone called rate_limit that will track the number of requests to your server. The 10m parameter specifies the size of the zone, and the 10r/s parameter specifies the rate at which requests will be limited.\nNext, you will need to add a new limit_req directive to under the original limit_req_zone block. This directive will use the zone we defined earlier to limit the number of requests to your server.\nlimit_req_zone $binary_remote_addr zone=rate_limit:10m rate=10r/s; limit_req zone=rate_limit burst=20 nodelay; This will limit the number of requests to your server to 10 requests per second, with a burst of 20 requests. The nodelay parameter will prevent requests from being delayed if the rate limit is exceeded.\nChanging the default status code If you are like me and the default status code of 503 is not what you want, you can change it by adding the limit_req_status under the limit_req directive.\nlimit_req_zone $binary_remote_addr zone=rate_limit:10m rate=10r/s; limit_req zone=rate_limit burst=20 nodelay; limit_req_status 429; HTTP 429 is the status code for “Too Many Requests” and is more appropriate for rate limiting.\nBypass Rate Limiting for a Subdomain After evaluating my subdomains, I discovered that one was subjected to rate limiting, which was not my intention.\nReading through the Nginx documentation, I found that if you pass an empty string to limit_req_zone it will not create a new zone. However, I still want to track requests for some domains? How can I do this?\nThe easiest solution I found was creating 2 map functions the first would return integer value based on the $server_name variable and the second would use the integer value to return either an empty string or $binary_remote_addr.\nmap $server_name $limit { default 1; subdomain1 0; } map $limit $limit_key { 0 \"\"; 1 $binary_remote_addr; } limit_req_zone $limit_key zone=rate_limit:10m rate=10r/s; limit_req zone=rate_limit burst=20 nodelay; limit_req_status 429; But how do I know what the value of $server_name is? When you define a subdomain in your Nginx configuration, you can use the server_name directive to specify the domain that you want to serve.\nBypass Rate Limiting for a Domain If you want to bypass rate limiting for a whole domain, you can still use the map functions we created earlier. However, you can provide a modifier to the map function to allow you to match a domain and all its subdomains.\nmap $server_name $limit { hostnames; default 1; subdomain1 0; *.example.com 0; } map $limit $limit_key { 0 \"\"; 1 $binary_remote_addr; } limit_req_zone $limit_key zone=rate_limit:10m rate=10r/s; limit_req zone=rate_limit burst=20 nodelay; limit_req_status 429; As you can see above we use the hostnames; modifier to allow the strings used within the map function to be treated as hostnames. This allows us to use wildcards to match a domain and all its subdomains.\nHowever, the value returned from the map function are based on this heirarchy from the Nginx documentation:\n1. string value without a mask 2. longest string value with a prefix mask, e.g. “*.example.com” 3. longest string value with a suffix mask, e.g. “mail.*” 4. first matching regular expression (in order of appearance in a configuration file) 5. default value Conclusion Rate limiting is a powerful tool that can be used to protect your server from being overwhelmed by abusive requests. By using the limit_req_zone and limit_req directives, you can limit the number of requests to your server and prevent abuse.\nHaving the ability to bypass rate limiting for specific subdomains or domains is also useful, as it allows you to host services that may require more requests than others.\nI hope this guide has been helpful, and I encourage you to experiment with rate limiting in Nginx to see how it can be used to protect your server.\n","wordCount":"812","inLanguage":"en","image":"https://blog.laurencejones.dev/rate-limit.jpg","datePublished":"2024-03-01T20:40:50Z","dateModified":"2024-03-01T20:40:50Z","author":{"@type":"Person","name":"Loz"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.laurencejones.dev/posts/nginx-rate-limit/"},"publisher":{"@type":"Organization","name":"DevSecOps","logo":{"@type":"ImageObject","url":"https://blog.laurencejones.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.laurencejones.dev/ accesskey=h title="DevSecOps (Alt + H)"><img src=https://blog.laurencejones.dev/me.png alt aria-label=logo height=55>DevSecOps</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.laurencejones.dev/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.laurencejones.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.laurencejones.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.laurencejones.dev/>Home</a>&nbsp;»&nbsp;<a href=https://blog.laurencejones.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Nginx Rate Limit</h1><div class=post-meta><span title='2024-03-01 20:40:50 +0000 UTC'>March 1, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Loz</div></header><figure class=entry-cover><img loading=eager src=https://blog.laurencejones.dev/rate-limit.jpg alt="rate limit cars"><figcaption>Attribution to <a href=https://unsplash.com/@beckerworks>David Becker</a></figcaption></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#nginx-rate-limit aria-label="Nginx Rate Limit">Nginx Rate Limit</a><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#basic-rate-limiting-example aria-label="Basic Rate Limiting Example">Basic Rate Limiting Example</a><ul><li><a href=#changing-the-default-status-code aria-label="Changing the default status code">Changing the default status code</a></li></ul></li><li><a href=#bypass-rate-limiting-for-a-subdomain aria-label="Bypass Rate Limiting for a Subdomain">Bypass Rate Limiting for a Subdomain</a></li><li><a href=#bypass-rate-limiting-for-a-domain aria-label="Bypass Rate Limiting for a Domain">Bypass Rate Limiting for a Domain</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=nginx-rate-limit>Nginx Rate Limit<a hidden class=anchor aria-hidden=true href=#nginx-rate-limit>#</a></h1><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Nginx is a powerful web server that can be used to serve static content, load balance, and act as a reverse proxy. It is also capable of rate limiting requests to prevent abuse and protect your server from being overwhelmed.</p><p>I seen various guides on how to set up rate limiting in Nginx, but I wanted to write my own since I had a specific use case in mind and I couldn&rsquo;t find an example anywhere.</p><p>I wanted to limit the number of requests to all my subdomains, but I also wanted to allow a single subdomain to bypass the rate limit.</p><p>This is useful when you host certain services that may require more requests than others, such as a web applications that hosts static files.</p><h2 id=basic-rate-limiting-example>Basic Rate Limiting Example<a hidden class=anchor aria-hidden=true href=#basic-rate-limiting-example>#</a></h2><p>To set up rate limiting in Nginx, you will need to add a new <code>limit_req_zone</code> directive to your <code>http</code> block. This directive will define a new rate limiting zone that will be used to track the number of requests to your server.</p><p>Personally I created a new file in <code>/etc/nginx/conf.d/</code> called <code>base-rate-limit.conf</code> and added the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>limit_req_zone</span> $binary_remote_addr <span style=color:#e6db74>zone=rate_limit:10m</span> <span style=color:#e6db74>rate=10r/s</span>;
</span></span></code></pre></div><p>This will create a new rate limiting zone called <code>rate_limit</code> that will track the number of requests to your server. The <code>10m</code> parameter specifies the size of the zone, and the <code>10r/s</code> parameter specifies the rate at which requests will be limited.</p><p>Next, you will need to add a new <code>limit_req</code> directive to under the original <code>limit_req_zone</code> block. This directive will use the zone we defined earlier to limit the number of requests to your server.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>limit_req_zone</span> $binary_remote_addr <span style=color:#e6db74>zone=rate_limit:10m</span> <span style=color:#e6db74>rate=10r/s</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req</span> <span style=color:#e6db74>zone=rate_limit</span> <span style=color:#e6db74>burst=20</span> <span style=color:#e6db74>nodelay</span>;
</span></span></code></pre></div><p>This will limit the number of requests to your server to 10 requests per second, with a burst of 20 requests. The <code>nodelay</code> parameter will prevent requests from being delayed if the rate limit is exceeded.</p><h3 id=changing-the-default-status-code>Changing the default status code<a hidden class=anchor aria-hidden=true href=#changing-the-default-status-code>#</a></h3><p>If you are like me and the default status code of <code>503</code> is not what you want, you can change it by adding the <code>limit_req_status</code> under the <code>limit_req</code> directive.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>limit_req_zone</span> $binary_remote_addr <span style=color:#e6db74>zone=rate_limit:10m</span> <span style=color:#e6db74>rate=10r/s</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req</span> <span style=color:#e6db74>zone=rate_limit</span> <span style=color:#e6db74>burst=20</span> <span style=color:#e6db74>nodelay</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req_status</span> <span style=color:#ae81ff>429</span>;
</span></span></code></pre></div><p><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429>HTTP 429</a> is the status code for &ldquo;Too Many Requests&rdquo; and is more appropriate for rate limiting.</p><h2 id=bypass-rate-limiting-for-a-subdomain>Bypass Rate Limiting for a Subdomain<a hidden class=anchor aria-hidden=true href=#bypass-rate-limiting-for-a-subdomain>#</a></h2><p>After evaluating my subdomains, I discovered that one was subjected to rate limiting, which was not my intention.</p><p>Reading through the Nginx documentation, I found that if you pass an empty string to <code>limit_req_zone</code> it will not create a new zone. However, I still want to track requests for some domains? How can I do this?</p><p>The easiest solution I found was creating 2 map functions the first would return integer value based on the <code>$server_name</code> variable and the second would use the integer value to return either an empty string or <code>$binary_remote_addr</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>map</span> $server_name $limit {
</span></span><span style=display:flex><span>    <span style=color:#f92672>default</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>subdomain1</span>  <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span> $limit $limit_key {
</span></span><span style=display:flex><span>    <span style=color:#f92672>0</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>1</span> $binary_remote_addr;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req_zone</span> $limit_key <span style=color:#e6db74>zone=rate_limit:10m</span> <span style=color:#e6db74>rate=10r/s</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req</span> <span style=color:#e6db74>zone=rate_limit</span> <span style=color:#e6db74>burst=20</span> <span style=color:#e6db74>nodelay</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req_status</span> <span style=color:#ae81ff>429</span>;
</span></span></code></pre></div><p>But how do I know what the value of <code>$server_name</code> is? When you define a subdomain in your Nginx configuration, you can use the <code>server_name</code> directive to specify the domain that you want to serve.</p><h2 id=bypass-rate-limiting-for-a-domain>Bypass Rate Limiting for a Domain<a hidden class=anchor aria-hidden=true href=#bypass-rate-limiting-for-a-domain>#</a></h2><p>If you want to bypass rate limiting for a whole domain, you can still use the map functions we created earlier. However, you can provide a modifier to the map function to allow you to match a domain and all its subdomains.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#66d9ef>map</span> $server_name $limit {
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostnames</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>default</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>subdomain1</span>  <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>*.example.com</span>  <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span> $limit $limit_key {
</span></span><span style=display:flex><span>    <span style=color:#f92672>0</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>1</span> $binary_remote_addr;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req_zone</span> $limit_key <span style=color:#e6db74>zone=rate_limit:10m</span> <span style=color:#e6db74>rate=10r/s</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req</span> <span style=color:#e6db74>zone=rate_limit</span> <span style=color:#e6db74>burst=20</span> <span style=color:#e6db74>nodelay</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit_req_status</span> <span style=color:#ae81ff>429</span>;
</span></span></code></pre></div><p>As you can see above we use the <code>hostnames;</code> modifier to allow the strings used within the map function to be treated as hostnames. This allows us to use wildcards to match a domain and all its subdomains.</p><p>However, the value returned from the map function are based on this heirarchy from the <a href=https://nginx.org/en/docs/http/ngx_http_map_module.html>Nginx documentation</a>:</p><pre tabindex=0><code>1. string value without a mask
2. longest string value with a prefix mask, e.g. “*.example.com”
3. longest string value with a suffix mask, e.g. “mail.*”
4. first matching regular expression (in order of appearance in a configuration file)
5. default value
</code></pre><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Rate limiting is a powerful tool that can be used to protect your server from being overwhelmed by abusive requests. By using the <code>limit_req_zone</code> and <code>limit_req</code> directives, you can limit the number of requests to your server and prevent abuse.</p><p>Having the ability to bypass rate limiting for specific subdomains or domains is also useful, as it allows you to host services that may require more requests than others.</p><p>I hope this guide has been helpful, and I encourage you to experiment with rate limiting in Nginx to see how it can be used to protect your server.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.laurencejones.dev/tags/nginx/>Nginx</a></li></ul><nav class=paginav><a class=prev href=https://blog.laurencejones.dev/posts/anubis-coolify/><span class=title>« Prev</span><br><span>Stop Bots on Coolify: Deploy Anubis for WordPress and Beyond</span>
</a><a class=next href=https://blog.laurencejones.dev/posts/ct-bots/><span class=title>Next »</span><br><span>Certificate Transparency Bots</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on x" href="https://x.com/intent/tweet/?text=Nginx%20Rate%20Limit&amp;url=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f&amp;hashtags=nginx"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f&amp;title=Nginx%20Rate%20Limit&amp;summary=Nginx%20Rate%20Limit&amp;source=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f&title=Nginx%20Rate%20Limit"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on whatsapp" href="https://api.whatsapp.com/send?text=Nginx%20Rate%20Limit%20-%20https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on telegram" href="https://telegram.me/share/url?text=Nginx%20Rate%20Limit&amp;url=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Nginx Rate Limit on ycombinator" href="https://news.ycombinator.com/submitlink?t=Nginx%20Rate%20Limit&u=https%3a%2f%2fblog.laurencejones.dev%2fposts%2fnginx-rate-limit%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.laurencejones.dev/>DevSecOps</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "78eb513c17ee4a129e843c461cf18e6c"}'></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>